services:
  evolution-api:
    image: atendai/evolution-api:latest
    container_name: evolution-api
    restart: unless-stopped
    ports:
      - "8085:8080"
    environment:
      # Server
      - SERVER_URL=https://your-domain.com # Change to your VPS domain/IP

      # Authentication
      - AUTHENTICATION_TYPE=apikey
      - AUTHENTICATION_API_KEY=${EVOLUTION_GLOBAL_KEY}
      - AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=true

      # Database (using PostgreSQL - same as EduVera)
      - DATABASE_ENABLED=true
      - DATABASE_PROVIDER=postgresql
      - DATABASE_CONNECTION_URI=${DATABASE_URL}
      - DATABASE_CONNECTION_CLIENT_NAME=evolution_api

      # Instance
      - DEL_INSTANCE=false
      - CONFIG_SESSION_PHONE_CLIENT=EduVera
      - CONFIG_SESSION_PHONE_NAME=Chrome

      # Logging
      - LOG_LEVEL=ERROR
      - LOG_COLOR=true

      # Webhook (optional - for receiving messages)
      - WEBHOOK_GLOBAL_ENABLED=false

      # QR Code
      - QRCODE_LIMIT=6
      - QRCODE_COLOR=#0D9488

    volumes:
      - evolution_instances:/evolution/instances
      - evolution_store:/evolution/store
    networks:
      - eduvera-network

volumes:
  evolution_instances:
  evolution_store:


networks:
  eduvera-network:
    external: true
